{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/leenk/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from '@/lib/utils'\n\nfunction Skeleton({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"skeleton\"\n      className={cn('bg-accent animate-pulse rounded-md', className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAoC;IACpE,qBACE,4TAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;KARS"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/leenk/lib/egress-monitor.ts"],"sourcesContent":["\"use client\"\n\n// Egress monitoring utility to track data usage\ninterface EgressMetrics {\n  totalBytes: number\n  requestCount: number\n  lastUpdated: number\n  byEndpoint: Record<string, { bytes: number; count: number }>\n}\n\nconst STORAGE_KEY = \"leenk_egress_metrics\"\nconst MAX_STORAGE_SIZE = 100 * 1024 * 1024 // 100MB max storage\n\nclass EgressMonitor {\n  private metrics: EgressMetrics = {\n    totalBytes: 0,\n    requestCount: 0,\n    lastUpdated: Date.now(),\n    byEndpoint: {},\n  }\n\n  constructor() {\n    this.loadMetrics()\n  }\n\n  // Load metrics from localStorage\n  private loadMetrics(): void {\n    if (typeof window === \"undefined\") return\n\n    try {\n      const stored = localStorage.getItem(STORAGE_KEY)\n      if (stored) {\n        this.metrics = JSON.parse(stored)\n      }\n    } catch (error) {\n      console.error(\"Error loading egress metrics:\", error)\n    }\n  }\n\n  // Save metrics to localStorage\n  private saveMetrics(): void {\n    if (typeof window === \"undefined\") return\n\n    try {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(this.metrics))\n    } catch (error) {\n      console.error(\"Error saving egress metrics:\", error)\n    }\n  }\n\n  // Estimate response size (rough approximation)\n  private estimateSize(data: any): number {\n    try {\n      const jsonString = JSON.stringify(data)\n      // Rough estimate: UTF-8 encoding, each character is ~1-4 bytes\n      // We'll use a conservative 2 bytes per character\n      return jsonString.length * 2\n    } catch {\n      // Fallback: estimate based on object keys\n      return Object.keys(data || {}).length * 100\n    }\n  }\n\n  // Record a request\n  recordRequest(endpoint: string, responseData: any): void {\n    const bytes = this.estimateSize(responseData)\n    \n    this.metrics.totalBytes += bytes\n    this.metrics.requestCount += 1\n    this.metrics.lastUpdated = Date.now()\n\n    if (!this.metrics.byEndpoint[endpoint]) {\n      this.metrics.byEndpoint[endpoint] = { bytes: 0, count: 0 }\n    }\n    this.metrics.byEndpoint[endpoint].bytes += bytes\n    this.metrics.byEndpoint[endpoint].count += 1\n\n    this.saveMetrics()\n\n    // Log in development\n    if (process.env.NODE_ENV === \"development\") {\n      console.log(`ðŸ“Š Egress: ${this.formatBytes(bytes)} from ${endpoint}`)\n    }\n  }\n\n  // Get current metrics\n  getMetrics(): EgressMetrics {\n    return { ...this.metrics }\n  }\n\n  // Get formatted summary\n  getSummary(): string {\n    const mb = this.metrics.totalBytes / (1024 * 1024)\n    const gb = mb / 1024\n    \n    let size: string\n    if (gb >= 1) {\n      size = `${gb.toFixed(2)} GB`\n    } else {\n      size = `${mb.toFixed(2)} MB`\n    }\n\n    return `Total: ${size} | Requests: ${this.metrics.requestCount}`\n  }\n\n  // Format bytes to human readable\n  formatBytes(bytes: number): string {\n    if (bytes === 0) return \"0 B\"\n    const k = 1024\n    const sizes = [\"B\", \"KB\", \"MB\", \"GB\"]\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\n    return `${(bytes / Math.pow(k, i)).toFixed(2)} ${sizes[i]}`\n  }\n\n  // Get top endpoints by usage\n  getTopEndpoints(limit: number = 5): Array<{ endpoint: string; bytes: number; count: number }> {\n    return Object.entries(this.metrics.byEndpoint)\n      .map(([endpoint, data]) => ({\n        endpoint,\n        bytes: data.bytes,\n        count: data.count,\n      }))\n      .sort((a, b) => b.bytes - a.bytes)\n      .slice(0, limit)\n  }\n\n  // Reset metrics\n  reset(): void {\n    this.metrics = {\n      totalBytes: 0,\n      requestCount: 0,\n      lastUpdated: Date.now(),\n      byEndpoint: {},\n    }\n    this.saveMetrics()\n  }\n\n  // Get daily usage (approximate)\n  getDailyUsage(): number {\n    const oneDayAgo = Date.now() - 24 * 60 * 60 * 1000\n    // This is a simplified version - in production you'd track timestamps per request\n    // For now, we'll return total if updated in last 24h, otherwise 0\n    if (this.metrics.lastUpdated > oneDayAgo) {\n      return this.metrics.totalBytes\n    }\n    return 0\n  }\n}\n\n// Singleton instance\nexport const egressMonitor = new EgressMonitor()\n\n// Helper to wrap fetch/API calls\nexport function monitorRequest(endpoint: string, responseData: any): void {\n  egressMonitor.recordRequest(endpoint, responseData)\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/leenk/app/admin/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { Button } from \"@/components/ui/button\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport { FaUsers, FaComments, FaDatabase, FaSpinner, FaLock } from \"react-icons/fa\"\nimport { RefreshCcw } from \"lucide-react\"\nimport { formatDistanceToNow } from \"date-fns\"\nimport { egressMonitor } from \"@/lib/egress-monitor\"\n\ninterface Business {\n  id: string\n  email: string\n  business_name: string | null\n  phone: string | null\n  address: string | null\n  online: boolean | null\n  is_admin: boolean | null\n  created_at: string\n  updated_at: string\n}\n\ninterface Conversation {\n  id: string\n  business_id: string\n  customer_email: string\n  customer_name: string | null\n  customer_phone: string | null\n  created_at: string\n  updated_at: string\n  pinned: boolean | null\n}\n\ninterface AdminStats {\n  businesses: Business[]\n  conversations: Conversation[]\n  stats: {\n    businessCount: number\n    conversationCount: number\n    messageCount: number\n  }\n}\n\nexport default function AdminDashboard() {\n  const router = useRouter()\n  const [data, setData] = useState<AdminStats | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [isCheckingAuth, setIsCheckingAuth] = useState(true)\n  const [isAuthorized, setIsAuthorized] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [activeTab, setActiveTab] = useState<\"users\" | \"conversations\" | \"egress\">(\"users\")\n\n  // Check if user is admin\n  useEffect(() => {\n    const checkAdmin = async () => {\n      try {\n        const response = await fetch(\"/api/admin/check\")\n        const result = await response.json()\n        \n        if (result.isAdmin) {\n          setIsAuthorized(true)\n        } else {\n          setIsAuthorized(false)\n          // Redirect to dashboard after 2 seconds\n          setTimeout(() => {\n            router.push(\"/dashboard\")\n          }, 2000)\n        }\n      } catch (err) {\n        setIsAuthorized(false)\n        setError(\"Failed to verify admin access\")\n      } finally {\n        setIsCheckingAuth(false)\n      }\n    }\n    \n    checkAdmin()\n  }, [router])\n\n  const fetchData = async () => {\n    setIsLoading(true)\n    setError(null)\n    try {\n      const response = await fetch(\"/api/admin/stats\")\n      if (!response.ok) throw new Error(\"Failed to fetch admin data\")\n      const result = await response.json()\n      setData(result)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Unknown error\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  // Get egress metrics from client-side monitor\n  const getEgressData = () => {\n    const metrics = egressMonitor.getMetrics()\n    return {\n      totalBytes: metrics.totalBytes,\n      totalGB: (metrics.totalBytes / (1024 * 1024 * 1024)).toFixed(2),\n      totalMB: (metrics.totalBytes / (1024 * 1024)).toFixed(2),\n      requestCount: metrics.requestCount,\n      byEndpoint: metrics.byEndpoint,\n    }\n  }\n\n  useEffect(() => {\n    fetchData()\n  }, [])\n\n  const formatBytes = (bytes: number): string => {\n    if (bytes === 0) return \"0 B\"\n    const k = 1024\n    const sizes = [\"B\", \"KB\", \"MB\", \"GB\"]\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\n    return `${(bytes / Math.pow(k, i)).toFixed(2)} ${sizes[i]}`\n  }\n\n  // Show loading while checking auth\n  if (isCheckingAuth) {\n    return (\n      <div className=\"min-h-screen bg-background p-6 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <FaSpinner className=\"w-8 h-8 animate-spin mx-auto mb-4 text-primary\" />\n          <p className=\"text-muted-foreground\">Verifying admin access...</p>\n        </div>\n      </div>\n    )\n  }\n\n  // Show unauthorized message\n  if (!isAuthorized) {\n    return (\n      <div className=\"min-h-screen bg-background p-6 flex items-center justify-center\">\n        <div className=\"max-w-md text-center space-y-4\">\n          <FaLock className=\"w-16 h-16 mx-auto text-destructive opacity-50\" />\n          <h1 className=\"text-2xl font-bold\">Access Denied</h1>\n          <p className=\"text-muted-foreground\">\n            You do not have admin privileges to access this page.\n          </p>\n          <p className=\"text-sm text-muted-foreground\">\n            Redirecting to dashboard...\n          </p>\n          <Button onClick={() => router.push(\"/dashboard\")} variant=\"outline\">\n            Go to Dashboard\n          </Button>\n        </div>\n      </div>\n    )\n  }\n\n  if (isLoading && !data) {\n    return (\n      <div className=\"min-h-screen bg-background p-6\">\n        <div className=\"max-w-7xl mx-auto space-y-6\">\n          <Skeleton className=\"h-12 w-64\" />\n          <Skeleton className=\"h-96 w-full\" />\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-background p-6\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"bg-destructive/10 border border-destructive rounded-lg p-4\">\n            <p className=\"text-destructive\">Error: {error}</p>\n            <Button onClick={fetchData} className=\"mt-4\">\n              Retry\n            </Button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (!data) return null\n\n  return (\n    <div className=\"min-h-screen bg-background p-4 md:p-6\">\n      <div className=\"max-w-7xl mx-auto space-y-6\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold\">Admin Dashboard</h1>\n            <p className=\"text-muted-foreground mt-1\">Manage users, conversations, and monitor egress</p>\n          </div>\n          <Button onClick={fetchData} disabled={isLoading} variant=\"outline\">\n            {isLoading ? (\n              <FaSpinner className=\"w-4 h-4 mr-2 animate-spin\" />\n            ) : (\n              <RefreshCcw className=\"w-4 h-4 mr-2\" />\n            )}\n            Refresh\n          </Button>\n        </div>\n\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div className=\"bg-card border border-border rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Total Users</p>\n                <p className=\"text-2xl font-bold mt-1\">{data.stats.businessCount}</p>\n              </div>\n              <FaUsers className=\"w-8 h-8 text-primary opacity-50\" />\n            </div>\n          </div>\n          <div className=\"bg-card border border-border rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Conversations</p>\n                <p className=\"text-2xl font-bold mt-1\">{data.stats.conversationCount}</p>\n              </div>\n              <FaComments className=\"w-8 h-8 text-primary opacity-50\" />\n            </div>\n          </div>\n          <div className=\"bg-card border border-border rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Messages</p>\n                <p className=\"text-2xl font-bold mt-1\">{data.stats.messageCount.toLocaleString()}</p>\n              </div>\n              <FaDatabase className=\"w-8 h-8 text-primary opacity-50\" />\n            </div>\n          </div>\n          <div className=\"bg-card border border-border rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Total Egress</p>\n                <p className=\"text-2xl font-bold mt-1\">{getEgressData().totalGB} GB</p>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  {getEgressData().requestCount.toLocaleString()} requests\n                </p>\n              </div>\n              <FaDatabase className=\"w-8 h-8 text-primary opacity-50\" />\n            </div>\n          </div>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"border-b border-border\">\n          <div className=\"flex space-x-4\">\n            <button\n              onClick={() => setActiveTab(\"users\")}\n              className={`pb-3 px-1 border-b-2 transition-colors ${\n                activeTab === \"users\"\n                  ? \"border-primary text-primary font-semibold\"\n                  : \"border-transparent text-muted-foreground hover:text-foreground\"\n              }`}\n            >\n              Users ({data.businesses.length})\n            </button>\n            <button\n              onClick={() => setActiveTab(\"conversations\")}\n              className={`pb-3 px-1 border-b-2 transition-colors ${\n                activeTab === \"conversations\"\n                  ? \"border-primary text-primary font-semibold\"\n                  : \"border-transparent text-muted-foreground hover:text-foreground\"\n              }`}\n            >\n              Conversations ({data.conversations.length})\n            </button>\n            <button\n              onClick={() => setActiveTab(\"egress\")}\n              className={`pb-3 px-1 border-b-2 transition-colors ${\n                activeTab === \"egress\"\n                  ? \"border-primary text-primary font-semibold\"\n                  : \"border-transparent text-muted-foreground hover:text-foreground\"\n              }`}\n            >\n              Egress Details\n            </button>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"bg-card border border-border rounded-lg overflow-hidden\">\n          {activeTab === \"users\" && (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-muted\">\n                  <tr>\n                    <th className=\"text-left p-4 font-semibold\">Email</th>\n                    <th className=\"text-left p-4 font-semibold\">Business Name</th>\n                    <th className=\"text-left p-4 font-semibold\">Phone</th>\n                    <th className=\"text-left p-4 font-semibold\">Status</th>\n                    <th className=\"text-left p-4 font-semibold\">Admin</th>\n                    <th className=\"text-left p-4 font-semibold\">Created</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {data.businesses.map((business) => (\n                    <tr key={business.id} className=\"border-t border-border hover:bg-muted/50\">\n                      <td className=\"p-4\">{business.email}</td>\n                      <td className=\"p-4\">{business.business_name || \"-\"}</td>\n                      <td className=\"p-4\">{business.phone || \"-\"}</td>\n                      <td className=\"p-4\">\n                        <span\n                          className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\n                            business.online\n                              ? \"bg-green-500/10 text-green-500\"\n                              : \"bg-gray-500/10 text-gray-500\"\n                          }`}\n                        >\n                          {business.online ? \"Online\" : \"Offline\"}\n                        </span>\n                      </td>\n                      <td className=\"p-4\">\n                        {business.is_admin ? (\n                          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary\">\n                            Admin\n                          </span>\n                        ) : (\n                          <span className=\"text-muted-foreground\">-</span>\n                        )}\n                      </td>\n                      <td className=\"p-4 text-sm text-muted-foreground\">\n                        {formatDistanceToNow(new Date(business.created_at), { addSuffix: true })}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n\n          {activeTab === \"conversations\" && (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-muted\">\n                  <tr>\n                    <th className=\"text-left p-4 font-semibold\">Customer Email</th>\n                    <th className=\"text-left p-4 font-semibold\">Customer Name</th>\n                    <th className=\"text-left p-4 font-semibold\">Business ID</th>\n                    <th className=\"text-left p-4 font-semibold\">Pinned</th>\n                    <th className=\"text-left p-4 font-semibold\">Last Updated</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {data.conversations.map((conversation) => (\n                    <tr key={conversation.id} className=\"border-t border-border hover:bg-muted/50\">\n                      <td className=\"p-4\">{conversation.customer_email}</td>\n                      <td className=\"p-4\">{conversation.customer_name || \"-\"}</td>\n                      <td className=\"p-4 font-mono text-xs\">{conversation.business_id.slice(0, 8)}...</td>\n                      <td className=\"p-4\">\n                        {conversation.pinned ? (\n                          <span className=\"text-primary\">âœ“</span>\n                        ) : (\n                          <span className=\"text-muted-foreground\">-</span>\n                        )}\n                      </td>\n                      <td className=\"p-4 text-sm text-muted-foreground\">\n                        {formatDistanceToNow(new Date(conversation.updated_at), { addSuffix: true })}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n\n          {activeTab === \"egress\" && (() => {\n            const egress = getEgressData()\n            return (\n              <div className=\"p-6 space-y-6\">\n                <div>\n                  <h3 className=\"text-lg font-semibold mb-4\">Total Egress Usage</h3>\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                    <div className=\"bg-muted rounded-lg p-4\">\n                      <p className=\"text-sm text-muted-foreground\">Total Data</p>\n                      <p className=\"text-2xl font-bold mt-1\">{egress.totalGB} GB</p>\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        {egress.totalMB} MB\n                      </p>\n                    </div>\n                    <div className=\"bg-muted rounded-lg p-4\">\n                      <p className=\"text-sm text-muted-foreground\">Total Requests</p>\n                      <p className=\"text-2xl font-bold mt-1\">{egress.requestCount.toLocaleString()}</p>\n                    </div>\n                    <div className=\"bg-muted rounded-lg p-4\">\n                      <p className=\"text-sm text-muted-foreground\">Avg per Request</p>\n                      <p className=\"text-2xl font-bold mt-1\">\n                        {egress.requestCount > 0\n                          ? formatBytes(egress.totalBytes / egress.requestCount)\n                          : \"0 B\"}\n                      </p>\n                    </div>\n                    <div className=\"bg-muted rounded-lg p-4\">\n                      <p className=\"text-sm text-muted-foreground\">Endpoints</p>\n                      <p className=\"text-2xl font-bold mt-1\">\n                        {Object.keys(egress.byEndpoint).length}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <h3 className=\"text-lg font-semibold mb-4\">Egress by Endpoint</h3>\n                  {Object.keys(egress.byEndpoint).length === 0 ? (\n                    <div className=\"text-center py-8 text-muted-foreground\">\n                      <p>No egress data available yet.</p>\n                      <p className=\"text-sm mt-2\">Egress metrics are tracked as you use the application.</p>\n                    </div>\n                  ) : (\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"w-full\">\n                        <thead className=\"bg-muted\">\n                          <tr>\n                            <th className=\"text-left p-4 font-semibold\">Endpoint</th>\n                            <th className=\"text-left p-4 font-semibold\">Data Used</th>\n                            <th className=\"text-left p-4 font-semibold\">Requests</th>\n                            <th className=\"text-left p-4 font-semibold\">Avg per Request</th>\n                            <th className=\"text-left p-4 font-semibold\">% of Total</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {Object.entries(egress.byEndpoint)\n                            .sort((a, b) => b[1].bytes - a[1].bytes)\n                            .map(([endpoint, stats]) => (\n                              <tr key={endpoint} className=\"border-t border-border hover:bg-muted/50\">\n                                <td className=\"p-4 font-mono text-sm\">{endpoint}</td>\n                                <td className=\"p-4 font-semibold\">{formatBytes(stats.bytes)}</td>\n                                <td className=\"p-4\">{stats.count.toLocaleString()}</td>\n                                <td className=\"p-4 text-muted-foreground\">\n                                  {formatBytes(stats.bytes / stats.count)}\n                                </td>\n                                <td className=\"p-4\">\n                                  <div className=\"flex items-center gap-2\">\n                                    <div className=\"flex-1 bg-muted rounded-full h-2 max-w-[100px]\">\n                                      <div\n                                        className=\"bg-primary h-2 rounded-full\"\n                                        style={{\n                                          width: `${egress.totalBytes > 0 ? (stats.bytes / egress.totalBytes) * 100 : 0}%`,\n                                        }}\n                                      />\n                                    </div>\n                                    <span className=\"text-sm text-muted-foreground\">\n                                      {egress.totalBytes > 0\n                                        ? ((stats.bytes / egress.totalBytes) * 100).toFixed(1)\n                                        : \"0\"}%\n                                    </span>\n                                  </div>\n                                </td>\n                              </tr>\n                            ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )\n          })()}\n        </div>\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}}]
}