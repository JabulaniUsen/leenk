module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},77577,a=>{"use strict";var b=a.i(15319),c=a.i(47033);a.s(["storage",0,{getAllBusinesses:async()=>[],getBusinessByPhone:async a=>await b.db.getBusinessByPhone(a),getBusinessById:async a=>await b.db.getBusinessById(a),createBusiness:async a=>{await b.db.createBusiness(a,"")},updateBusiness:async(a,c)=>{await b.db.updateBusiness(a,c)},getConversationsByBusinessId:async a=>await b.db.getConversationsByBusinessId(a),getConversationById:async a=>await b.db.getConversationById(a),createConversation:async a=>{if(!a.customerEmail)throw Error("customerEmail is required to create a conversation");await b.db.createConversation(a)},updateConversation:async(a,c)=>{await b.db.updateConversation(a,c)},getAuth:async()=>await c.auth.getCurrentUser(),setAuth:async a=>{},clearAuth:async()=>{await c.auth.signOut()}}])},20226,a=>{"use strict";var b=a.i(72131);let c=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},d=a=>{let d=a?c(a):c,e=a=>(function(a,c=a=>a){let d=b.default.useSyncExternalStore(a.subscribe,b.default.useCallback(()=>c(a.getState()),[a,c]),b.default.useCallback(()=>c(a.getInitialState()),[a,c]));return b.default.useDebugValue(d),d})(d,a);return Object.assign(e,d),e},e=a=>a?d(a):d;a.s(["create",()=>e],20226)},45763,a=>{"use strict";var b=a.i(20226),c=a.i(77577);let d=(0,b.create)(a=>({user:null,loading:!0,initialized:!1,loadAuth:async()=>{a({loading:!0});try{let b=await c.storage.getAuth();return a({user:b,loading:!1,initialized:!0}),b}catch(b){return console.error("Error loading auth:",b),a({user:null,loading:!1,initialized:!0}),null}},setUser:b=>a({user:b}),clearAuth:async()=>{await c.storage.clearAuth(),a({user:null})},updateBusiness:b=>{a(a=>({user:a.user?{...a.user,business:b}:null}))}}));a.s(["useAuthStore",0,d])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},78917,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(40695),f=a.i(46271),g=a.i(77577),h=a.i(71987),i=a.i(70106);let j=(0,i.default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),k=(0,i.default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),l=(0,i.default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var m=a.i(96221),n=a.i(92e3),o=a.i(45763);function p(){let a=(0,d.useRouter)(),{user:i,loadAuth:p}=(0,o.useAuthStore)(),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!0);(0,c.useEffect)(()=>{(async()=>{var b;let c=await p();if(!c)return a.push("/login");(b=c.business)&&b.businessName&&b.phone&&b.address?a.push("/dashboard"):(c.business&&(r(c.business.businessName||""),t(c.business.phone||""),v(c.business.address||"")),B(!1))})()},[a,p]);let C=async b=>{b.preventDefault(),x(""),z(!0);try{if(!q.trim()){x("Business name is required"),z(!1);return}if(!s.trim()){x("Phone number is required"),z(!1);return}if(!u.trim()){x("Address is required"),z(!1);return}if(!/^[\+]?[(]?[0-9]{1,4}[)]?[-\s\.]?[(]?[0-9]{1,4}[)]?[-\s\.]?[0-9]{1,9}$/.test(s.trim())){x("Please enter a valid phone number"),z(!1);return}if(!i?.business){x("User account not found. Please try logging in again."),z(!1);return}let b=await g.storage.getBusinessByPhone(s.trim());if(b&&b.id!==i.id){x("This phone number is already in use by another business"),z(!1);return}await g.storage.updateBusiness(i.business.id,{businessName:q.trim(),phone:s.trim(),address:u.trim()}),await p(),a.push("/dashboard")}catch(a){console.error("Error completing onboarding:",a),x(a instanceof Error?a.message:"Failed to complete setup. Please try again."),z(!1)}};return A?(0,b.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-white to-slate-100 dark:from-slate-950 dark:via-slate-900 dark:to-slate-800",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[(0,b.jsx)(m.Loader2,{className:"w-5 h-5 animate-spin"}),(0,b.jsx)("span",{children:"Loading..."})]})}):i?(0,b.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-white to-slate-100 dark:from-slate-950 dark:via-slate-900 dark:to-slate-800 p-4",children:(0,b.jsx)(f.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"w-full max-w-md",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-2xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-primary/10 via-primary/5 to-transparent dark:from-primary/20 dark:via-primary/10 p-6 text-center border-b border-slate-200 dark:border-slate-800",children:[(0,b.jsx)(f.motion.div,{initial:{scale:.9},animate:{scale:1},transition:{delay:.1},className:"flex justify-center mb-4",children:(0,b.jsx)(h.default,{src:"/logo.png",alt:"Leenk",width:80,height:80,className:"object-contain drop-shadow-lg"})}),(0,b.jsx)(f.motion.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Complete Your Business Profile"}),(0,b.jsx)(f.motion.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-sm text-slate-600 dark:text-slate-400",children:"Tell us about your business to get started"})]}),(0,b.jsxs)("div",{className:"p-6 md:p-8",children:[(0,b.jsxs)("form",{onSubmit:C,className:"space-y-5",children:[w&&(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm flex items-center gap-2",children:[(0,b.jsx)(n.AlertCircle,{className:"w-4 h-4 flex-shrink-0"}),(0,b.jsx)("span",{children:w})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:["Business Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(j,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 dark:text-slate-500"}),(0,b.jsx)("input",{type:"text",value:q,onChange:a=>{r(a.target.value),x("")},placeholder:"Your Business Name",className:"w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl px-4 pl-11 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",required:!0,autoFocus:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:["Phone Number ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(k,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 dark:text-slate-500"}),(0,b.jsx)("input",{type:"tel",value:s,onChange:a=>{t(a.target.value),x("")},placeholder:"+1234567890",className:"w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl px-4 pl-11 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",required:!0})]}),(0,b.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"This will be used for your public chat link"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:["Business Address ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(l,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 dark:text-slate-500"}),(0,b.jsx)("input",{type:"text",value:u,onChange:a=>{v(a.target.value),x("")},placeholder:"123 Main St, City, State, ZIP",className:"w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl px-4 pl-11 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",required:!0})]})]}),(0,b.jsx)(e.Button,{type:"submit",className:"w-full h-12 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed mt-6",disabled:y||!q.trim()||!s.trim()||!u.trim(),children:y?(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Loader2,{className:"w-4 h-4 animate-spin"}),"Completing Setup..."]}):(0,b.jsx)("span",{children:"Complete Setup"})})]}),(0,b.jsx)("p",{className:"text-xs text-center text-slate-500 dark:text-slate-400 mt-6",children:"All fields are required to complete your business profile"})]})]})})}):null}a.s(["default",()=>p],78917)}];

//# sourceMappingURL=_f30d88fa._.js.map