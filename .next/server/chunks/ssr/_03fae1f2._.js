module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},20226,a=>{"use strict";var b=a.i(72131);let c=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},d=a=>{let d=a?c(a):c,e=a=>(function(a,c=a=>a){let d=b.default.useSyncExternalStore(a.subscribe,b.default.useCallback(()=>c(a.getState()),[a,c]),b.default.useCallback(()=>c(a.getInitialState()),[a,c]));return b.default.useDebugValue(d),d})(d,a);return Object.assign(e,d),e},e=a=>a?d(a):d;a.s(["create",()=>e],20226)},77577,a=>{"use strict";var b=a.i(15319),c=a.i(47033);a.s(["storage",0,{getAllBusinesses:async()=>[],getBusinessByPhone:async a=>await b.db.getBusinessByPhone(a),getBusinessById:async a=>await b.db.getBusinessById(a),createBusiness:async a=>{await b.db.createBusiness(a,"")},updateBusiness:async(a,c)=>{await b.db.updateBusiness(a,c)},getConversationsByBusinessId:async a=>await b.db.getConversationsByBusinessId(a),getConversationById:async a=>await b.db.getConversationById(a),createConversation:async a=>{if(!a.customerEmail)throw Error("customerEmail is required to create a conversation");await b.db.createConversation(a)},updateConversation:async(a,c)=>{await b.db.updateConversation(a,c)},getAuth:async()=>await c.auth.getCurrentUser(),setAuth:async a=>{},clearAuth:async()=>{await c.auth.signOut()}}])},45763,a=>{"use strict";var b=a.i(20226),c=a.i(77577);let d=(0,b.create)(a=>({user:null,loading:!0,initialized:!1,loadAuth:async()=>{a({loading:!0});try{let b=await c.storage.getAuth();return a({user:b,loading:!1,initialized:!0}),b}catch(b){return console.error("Error loading auth:",b),a({user:null,loading:!1,initialized:!0}),null}},setUser:b=>a({user:b}),clearAuth:async()=>{await c.storage.clearAuth(),a({user:null})},updateBusiness:b=>{a(a=>({user:a.user?{...a.user,business:b}:null}))}}));a.s(["useAuthStore",0,d])},50463,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"skeleton",className:(0,c.cn)("bg-accent animate-pulse rounded-md",a),...d})}a.s(["Skeleton",()=>d])},20731,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(40695),f=a.i(7108),g=a.i(46271),h=a.i(38246),i=a.i(70106);let j=(0,i.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),k=(0,i.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var l=a.i(35540);let m=(0,i.default)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),n=(0,i.default)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);function o(){let{theme:a,toggleTheme:c}=(0,l.useTheme)();return(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:c,className:"text-foreground hover:bg-secondary","aria-label":"Toggle theme",children:"light"===a?(0,b.jsx)(m,{className:"w-4 h-4"}):(0,b.jsx)(n,{className:"w-4 h-4"})})}var p=a.i(40385),q=a.i(50463);function r(){return(0,b.jsx)("div",{className:"space-y-0",children:Array.from({length:5}).map((a,c)=>(0,b.jsx)("div",{className:"p-3 md:p-4 border-b border-border",children:(0,b.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,b.jsx)(q.Skeleton,{className:"w-10 h-10 rounded-full"}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsx)(q.Skeleton,{className:"h-4 w-32"}),(0,b.jsx)(q.Skeleton,{className:"h-3 w-16"})]}),(0,b.jsx)(q.Skeleton,{className:"h-3 w-24"}),(0,b.jsx)(q.Skeleton,{className:"h-3 w-full max-w-xs"})]})]})},c))})}var s=a.i(45763),t=a.i(89315),u=a.i(44735),v=a.i(71987);function w(){let a=(0,d.useRouter)(),{user:i,loading:l,loadAuth:m,clearAuth:n,initialized:q}=(0,s.useAuthStore)(),{conversations:w,loading:x,loadConversations:y}=(0,t.useConversationsStore)(),{setupBusinessChannel:z}=(0,u.useRealtimeStore)(),A=a=>!!a&&!!(a.businessName&&a.phone&&a.address);(0,c.useEffect)(()=>{q?i?A(i.business)?i.business&&0===w.length&&!x&&y(i.id):a.push("/onboarding"):a.push("/login"):m().then(b=>{b?A(b.business)?b.business&&y(b.id):a.push("/onboarding"):a.push("/login")})},[q,m,y,a,i,w.length,x]),(0,c.useEffect)(()=>{if(i?.id)return z(i.id)},[i?.id,z]);let B=async()=>{await n(),a.push("/")},C=l||x;return q&&!l&&i?(0,b.jsxs)("main",{className:"h-screen flex flex-col md:flex-row bg-[var(--chat-bg)] dark:bg-[var(--chat-bg)]",children:[(0,b.jsxs)(g.motion.aside,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"w-full md:w-80 border-r border-[#313d45] md:border-border flex flex-col bg-[#111b21] md:bg-card",children:[(0,b.jsxs)("div",{className:"p-3 md:p-4 border-b border-border bg-card",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[(0,b.jsx)(v.default,{src:"/logo.png",alt:"Leenk",width:80,height:80,className:"object-contain"}),(0,b.jsxs)("div",{className:"flex gap-1 md:gap-2",children:[(0,b.jsx)(o,{}),(0,b.jsx)(h.default,{href:"/dashboard/settings",children:(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",children:(0,b.jsx)(k,{className:"w-4 h-4"})})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:B,children:(0,b.jsx)(j,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,b.jsx)(p.Avatar,{src:i.business?.businessLogo,name:i.business?.businessName,size:"md"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:i.business?.businessName}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:i.email})]})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto bg-background",children:C?(0,b.jsx)(r,{}):(0,b.jsx)(f.ConversationList,{conversations:w})})]}),(0,b.jsx)(g.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"hidden md:flex flex-1 items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Select a Conversation"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Click on a conversation to start chatting with your customers"})]})})]}):null}a.s(["default",()=>w],20731)}];

//# sourceMappingURL=_03fae1f2._.js.map