(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},56563,e=>{"use strict";var t=e.i(51358),a=e.i(38036);e.s(["storage",0,{getAllBusinesses:async()=>[],getBusinessByPhone:async e=>await t.db.getBusinessByPhone(e),getBusinessById:async e=>await t.db.getBusinessById(e),createBusiness:async e=>{await t.db.createBusiness(e,"")},updateBusiness:async(e,a)=>{await t.db.updateBusiness(e,a)},getConversationsByBusinessId:async e=>await t.db.getConversationsByBusinessId(e),getConversationById:async e=>await t.db.getConversationById(e),createConversation:async e=>{if(!e.customerEmail)throw Error("customerEmail is required to create a conversation");await t.db.createConversation(e)},updateConversation:async(e,a)=>{await t.db.updateConversation(e,a)},getAuth:async()=>await a.auth.getCurrentUser(),setAuth:async e=>{},clearAuth:async()=>{await a.auth.signOut()}}])},68834,e=>{"use strict";var t=e.i(71645);let a=e=>{let t,a=new Set,s=(e,s)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=s?s:"object"!=typeof r||null===r)?r:Object.assign({},t,r),a.forEach(a=>a(t,e))}},r=()=>t,i={setState:s,getState:r,getInitialState:()=>l,subscribe:e=>(a.add(e),()=>a.delete(e))},l=t=e(s,r,i);return i},s=e=>{let s=e?a(e):a,r=e=>(function(e,a=e=>e){let s=t.default.useSyncExternalStore(e.subscribe,t.default.useCallback(()=>a(e.getState()),[e,a]),t.default.useCallback(()=>a(e.getInitialState()),[e,a]));return t.default.useDebugValue(s),s})(s,e);return Object.assign(r,s),r},r=e=>e?s(e):s;e.s(["create",()=>r],68834)},44580,e=>{"use strict";var t=e.i(68834),a=e.i(56563);let s=(0,t.create)(e=>({user:null,loading:!0,initialized:!1,loadAuth:async()=>{e({loading:!0});try{let t=await a.storage.getAuth();return e({user:t,loading:!1,initialized:!0}),t}catch(t){return console.error("Error loading auth:",t),e({user:null,loading:!1,initialized:!0}),null}},setUser:t=>e({user:t}),clearAuth:async()=>{await a.storage.clearAuth(),e({user:null})},updateBusiness:t=>{e(e=>({user:e.user?{...e.user,business:t}:null}))}}));e.s(["useAuthStore",0,s])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},23143,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(67881),i=e.i(46932),l=e.i(56563),n=e.i(57688),d=e.i(75254);let o=(0,d.default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),u=(0,d.default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),c=(0,d.default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var h=e.i(31278),m=e.i(63209),x=e.i(44580);function p(){let e=(0,s.useRouter)(),{user:d,loadAuth:p}=(0,x.useAuthStore)(),[b,y]=(0,a.useState)(""),[f,g]=(0,a.useState)(""),[k,v]=(0,a.useState)(""),[j,w]=(0,a.useState)(""),[N,B]=(0,a.useState)(!1),[C,A]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{var t;let a=await p();if(!a)return e.push("/login");(t=a.business)&&t.businessName&&t.phone&&t.address?e.push("/dashboard"):(a.business&&(y(a.business.businessName||""),g(a.business.phone||""),v(a.business.address||"")),A(!1))})()},[e,p]);let S=async t=>{t.preventDefault(),w(""),B(!0);try{if(!b.trim()){w("Business name is required"),B(!1);return}if(!f.trim()){w("Phone number is required"),B(!1);return}if(!k.trim()){w("Address is required"),B(!1);return}if(!/^[\+]?[(]?[0-9]{1,4}[)]?[-\s\.]?[(]?[0-9]{1,4}[)]?[-\s\.]?[0-9]{1,9}$/.test(f.trim())){w("Please enter a valid phone number"),B(!1);return}if(!d?.business){w("User account not found. Please try logging in again."),B(!1);return}let t=await l.storage.getBusinessByPhone(f.trim());if(t&&t.id!==d.id){w("This phone number is already in use by another business"),B(!1);return}await l.storage.updateBusiness(d.business.id,{businessName:b.trim(),phone:f.trim(),address:k.trim()}),await p(),e.push("/dashboard")}catch(e){console.error("Error completing onboarding:",e),w(e instanceof Error?e.message:"Failed to complete setup. Please try again."),B(!1)}};return C?(0,t.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-white to-slate-100 dark:from-slate-950 dark:via-slate-900 dark:to-slate-800",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[(0,t.jsx)(h.Loader2,{className:"w-5 h-5 animate-spin"}),(0,t.jsx)("span",{children:"Loading..."})]})}):d?(0,t.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-white to-slate-100 dark:from-slate-950 dark:via-slate-900 dark:to-slate-800 p-4",children:(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"w-full max-w-md",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-2xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-primary/10 via-primary/5 to-transparent dark:from-primary/20 dark:via-primary/10 p-6 text-center border-b border-slate-200 dark:border-slate-800",children:[(0,t.jsx)(i.motion.div,{initial:{scale:.9},animate:{scale:1},transition:{delay:.1},className:"flex justify-center mb-4",children:(0,t.jsx)(n.default,{src:"/logo.png",alt:"Leenk",width:80,height:80,className:"object-contain drop-shadow-lg"})}),(0,t.jsx)(i.motion.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Complete Your Business Profile"}),(0,t.jsx)(i.motion.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-sm text-slate-600 dark:text-slate-400",children:"Tell us about your business to get started"})]}),(0,t.jsxs)("div",{className:"p-6 md:p-8",children:[(0,t.jsxs)("form",{onSubmit:S,className:"space-y-5",children:[j&&(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm flex items-center gap-2",children:[(0,t.jsx)(m.AlertCircle,{className:"w-4 h-4 flex-shrink-0"}),(0,t.jsx)("span",{children:j})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:["Business Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 dark:text-slate-500"}),(0,t.jsx)("input",{type:"text",value:b,onChange:e=>{y(e.target.value),w("")},placeholder:"Your Business Name",className:"w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl px-4 pl-11 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",required:!0,autoFocus:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:["Phone Number ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 dark:text-slate-500"}),(0,t.jsx)("input",{type:"tel",value:f,onChange:e=>{g(e.target.value),w("")},placeholder:"+1234567890",className:"w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl px-4 pl-11 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",required:!0})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"This will be used for your public chat link"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:["Business Address ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 dark:text-slate-500"}),(0,t.jsx)("input",{type:"text",value:k,onChange:e=>{v(e.target.value),w("")},placeholder:"123 Main St, City, State, ZIP",className:"w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl px-4 pl-11 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",required:!0})]})]}),(0,t.jsx)(r.Button,{type:"submit",className:"w-full h-12 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed mt-6",disabled:N||!b.trim()||!f.trim()||!k.trim(),children:N?(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Loader2,{className:"w-4 h-4 animate-spin"}),"Completing Setup..."]}):(0,t.jsx)("span",{children:"Complete Setup"})})]}),(0,t.jsx)("p",{className:"text-xs text-center text-slate-500 dark:text-slate-400 mt-6",children:"All fields are required to complete your business profile"})]})]})})}):null}e.s(["default",()=>p],23143)}]);